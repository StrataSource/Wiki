# Portal 2: Community Edition - October 4th, 2023 Update

## Additions (16)
- Added 'paintpower' property for paint color material proxy to request a specific color
- Added CSM and flashlight to `lightmappedreflective`
- Added ConVar `traceray_force_vphysics` for testing (1 = Use VPhysics collisions for displacements, 2 = for everything)
- Added ConVar `traceray_unshrink_vphysics_brushes` which unshrinks VPhysics-type brush entities
- Added ModelPanel methods to change/enumerate flexes
- Added ModelPanel methods to change/enumerate pose parameters
- Added ModelPanel methods to change/enumerate sequences
- Added Panorama weapons API for custom weapon select HUDs
- Added `ForceDropPhysObject` input to `!player`
- Added `GameStateAPI.IsPlaytest()` and `GameStateAPI.IsPlaytestRecording()`
- Added `gameui_activate` command to Steam Input command list
- Added `zoom`, `toggleconsole`, `showconsole` and `hideconsole` commands to be usable in steam input
- Added a mandatory whitelist file for Panorama's AsyncWebRequest function. The `-unrestrictedwebrequests` launch argument will skip this file and allow all requests
- Added support for escape sequences `\n`, `\t`, `\"`, and `\\` in VMF and BSP [#60](https://github.com/StrataSource/Engine/issues/60) [#1899](https://github.com/momentum-mod/game/issues/1899)
- Exposed `SetSelected(bool)` on `RadioButton` in Panorama JavaScript API
- Restore the original Connection Problem warning for Legacy UI [#1144](https://github.com/StrataSource/Portal-2-Community-Edition/issues/1144)

## Fixes (38)
- Adjusted folder mounting order to fix wrong assets occasionally being used
- Fixed AI disabling on maps with no navigation nodes (Like `sp_a2_bts5`)
- Fixed Co-Op ping tool using SP custom colours
- Fixed Hammer crashes related to entity outputs
- Fixed Hammer crashes related to saving and loading files
- Fixed Hammer inserting extra quotation marks for compile commands [#753](https://github.com/StrataSource/Engine/issues/753)
- Fixed Paint blob particles always being white
- Fixed Panorama UI controller movement always moving right no matter the input direction
- Fixed Panorama not loading images when game was started with +map
- Fixed Portal 1 crosshair not swapping properly when playing with controller
- Fixed VBSP not always acknowledging parameters in patched materials
- Fixed VGUI panels not loading proper fonts in Panorama
- Fixed `-multirun` not working [#882](https://github.com/StrataSource/Engine/issues/882)
- Fixed `logic_branch` not firing _OnLogicBranchRemoved to its listeners
- Fixed `player_speedmod` not working in singleplayer when inputs are not called directly from the player
- Fixed `trigger_autosave` being deleted upon map load
- Fixed a crash on laser-triggered cube respawn [#1510](https://github.com/StrataSource/Portal-2-Community-Edition/issues/1510)
- Fixed certain VTFs failing to load due to added resources
- Fixed certain entities not being found during a level transition
- Fixed crash when determining recipients to multicast to
- Fixed crash when omitting certain child elements from the Panorama loading screen panel
- Fixed crash when popup-manager.xml is invalid (the game now exits with an error dialogue)
- Fixed displacement tool sometimes making 2D views to not update
- Fixed flashlight making some opaque water disappear
- Fixed hang on start when the engine is told to play an invalid startup movie
- Fixed instance outputs bugs
- Fixed issues with some collision traces, notably bullet impact traces on displacements
- Fixed opening the game menu sometimes requiring an extra ESC input
- Fixed point entities in 2D view not drawing outlines and text
- Fixed rare possibility for a trace that starts inside a world brush or entity and then runs into a different entity to pass through that entity
- Fixed rendering of jigglebones within model panels
- Fixed server content taking priority over game files
- Fixed shaded textured view not working
- Fixed string truncation when using SetMessage input on `point_worldtext`
- Fixed the map name not displaying in the top right corner [#912](https://github.com/StrataSource/Engine/issues/912)
- Made ModelPanel rotation speed consistent regardless of FPS
- Prevent a crash when the surface vertex count exceeds the max decal vertex limit
- Restore timeout while waiting for your partner in Cooperative

## Improvements (27)
- Allowed the game to run alongside other Source games without `-multirun` [#268](https://github.com/momentum-mod/game/issues/268)
- Displacements now use the more accurate VPhysics collisions by default (`traceray_force_vphysics` 1)
- Fogui FarZ can now be set to -1 (Default value), which disables the override
- Fogui now allows users to enter and copy numbers manually on sliders
- Game no longer creates soundcache directory in maps folder when not needed
- Hammer fix map dialog now will try to warn about unused keyvalue typos of existing keyvalues are not set, instead of suggesting to remove them
- Hammer options dialog now only saves settings when pressing OK button
- Hammer options dialog now updates 2D/3D views when changing visual settings
- Logical view in Hammer now draws its title
- Made VMF saving a little bit more robust to not keep corrupted file on crash
- Made steam.inf parsing hardier and informative
- Move to visgroup dialog now shows user visgroups as well
- Overlays in Hammer should no longer z-fight with wall they are on
- Panorama XML parsing errors should now give more context to the error
- Panorama now can handle texture reloading without freaking out
- Ported Hammer Arch and Torus dialogs to Qt
- Ported Hammer Map Diff dialog to Qt
- Ported Select Entity dialog to Qt
- Reduced the number of required child elements for the Panorama main menu and intro movie
- Removed SFUI prefixes from all localization files
- Removed max limit on texlights in VRAD
- Toggling maximized view in Hammer now doesn't break active mouse look
- Transform dialog now shows 1 as placeholder when scaling
- Un-developered `sv_soundemitter` commands
- Unamed instances can now use `func_instance_io_proxy`
- `ambient_generic` now finds Sound Source entity's every time it is played, not only when initialized
- `material_modify_control` now should be able to handle when materials are modified by VBSP (cubemap fixup or wvt patch) on newly compiled maps

## Console (8)
- Console autocomplete and history can now be navigated with tab and shift+tab, like in other games
- Console input is now immediately filled in when navigating the autocomplete menu
- Autocomplete now correctly shows the first 100 results alphabetically out of all matches, instead of just the first 100 found
- Input history no longer saves empty or duplicate inputs
- The backtick key (\`) will now always close the console if it is open (controlled by `con_backtick_always_closes`)
- Closing the console now also automatically closes the game menu
- Pressing ESC will now clear the console input box if it has text, otherwise it will close the console
- Closing the console no longer clears the input box automatically
