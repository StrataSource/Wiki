# Portal 2: Community Edition - July 15th, 2023 Update

## Additions (30)
- Added 'Test' and 'InValueNoTest' inputs to `logic_case` (upstream from Revolution)
- Added CSM debug menu
- Added ConVar change listener method for Panorama
- Added ImGui versions of `+showbudget`, `+showbudget_texture`, and `+showbudget_texture_global` panels
- Added VScript function `CScriptKeyValues::Dump`
- Added `$.LoadKeyValues3File` to load KV3 files
- Added `distvariance` sound parameter to sound scripts, allowing for distance blending to be tweaked instead of being tied to a ConVar. Usage is `distvariance "near, far"`
- Added `ent_text` debug output to `logic_gate`
- Added a `download` mount for all content downloaded from community servers to be held in
- Added button to toggle Sentry consent in game
- Added clipboard support to ImGui
- Added crash feedback dialog
- Added dynamically coloured paint blobs
- Added flag to lights to disable sprite drawing in `buildcubemaps`
- Added framerate limit to Hammer 3D viewport to prevent GPU ramping up to 100% usage
- Added in HL2's HUD Hint Display
- Added keyvalue to control Rocket Turret range
- Added movie support to `env_projectedtexture` (upstream from Revolution)
- Added option to choose framerate limit in Hammer
- Added option to disable lazy texture loading in Hammer
- Added pose parameter output to mdlinfo and improved output formatting
- Added projected texture keyvalue limit (8 is the new max)
- Added spawn flag to `prop_button` to disable activation sounds
- Added support for `cl_downloadfilter mapsonly` to download only BSPs from servers
- Added the ability to change the `npc_personality_core` flashlight color (upstream from Revolution)
- Added utility to dump shader documentation
- Re-enabled the following operators in the `math_float` sound operator:  asinh, atanh, acosh, expm1, expm2, log2, log1p, logb, erf, erfc, gamma, lgamma, rint, nearbyint, roundtol and trunc
- Schrödinger cube can now support dirty skin variant (upstream from Revolution)
- Schrödinger cubes can now play particle effects when powered (upstream from Revolution)
- Schrödinger cubes can now play sound when powered and unpowered (upstream from Revolution)

## Fixes (69)
- Bullet decals, 375 shells, AR2 impact and crossbow effects now appear as expected
- Disabled `npc_wheatley_boss`, `npc_monk` and `npc_rocket_turret` interactions with the Gravity Gun
- Disallow more client cmds when in non-co-op multiplayer
- Don't show the co-op partner remote view in true multiplayer
- Fixed 'scale' being applied to all entities in Hammer
- Fixed 3D view in Hammer flickering when antialiasing was disabled
- Fixed Adhesion Gel behaving incorrectly on level transition
- Fixed Adhesion Gel sometimes not reorienting the Player's hull
- Fixed Arbitrary VScript execution on the co-op host (Thanks for the report Nanoman2525!)
- Fixed Hammer crash when changing `prop_static` entity into `prop_dynamic`
- Fixed Hammer solids not rendering
- Fixed Linux dependency issues for Panorama
- Fixed MRU material list getting reversed on every Hammer launch
- Fixed MSAA trying to be applied even when driver reported no support
- Fixed PNG screenshots having a weird line in them in some cases
- Fixed PNG screenshots on maps with HDR being too dark
- Fixed VBSP not finding entities at "0 0 0" and leaking the map
- Fixed VGUI Console lockups
- Fixed VScript crash on VM error
- Fixed `$detailtint` not working on VertexLitGeneric with `$phong`
- Fixed `_restart` not restarting the game
- Fixed `cl_csm_debug_2d`
- Fixed `logic_gate` having incorrect starting state
- Fixed `logic_gate` state being incorrect after reloading a save
- Fixed `npc_personality_core` and `npc_monk` being able to be dissolved
- Fixed `r_mapextents` getting reset on map reload without cheats
- Fixed certain client co-op commands doing whatever they want on the server in true multiplayer
- Fixed clamping logic of `math_clamp`
- Fixed crash in closed captions
- Fixed crash on dedicated server related to DevUI
- Fixed crash when decoding certain 8-bit WAV files
- Fixed crash when sprite helper would have invalid model and parent tried to change scale KV
- Fixed crash when using bind command in console
- Fixed disable glow input
- Fixed failing to create swapchain on some hardware
- Fixed faulty logic causing IK to be unusable
- Fixed formatting logic of `logic_format`
- Fixed handling of CRLF files in StudioMDL on Linux
- Fixed infinite loop in audio code
- Fixed loading of TF2 maps with v7 static prop lump
- Fixed map instance resolution under Linux
- Fixed model helper trying to use non-uniform scale on non-prop_static entities
- Fixed modelscale not updating when undoing in Hammer
- Fixed nodraw/favourite button in Hammer sometimes not working
- Fixed not being able to choose game config with doubleclick
- Fixed occasional Hammer and game crash when reloading models
- Fixed occasional crash that could happen when using `playvol` command
- Fixed occasional lockups on very large maps when opening portals
- Fixed performance degradation issue
- Fixed personality cores, turrets, security cameras and roller mines spawning duplicate ragdolls with the Super Gravity Gun
- Fixed point_paint_sensor not detecting blue gel before the surface is painted some other color first
- Fixed possible crash when trying to interact with map window during load
- Fixed regression breaking connections outside of the local machine
- Fixed rendering breaking when disabling postprocess on HDR maps
- Fixed richpresence spam
- Fixed screenshots in certain scenarios
- Fixed security exploit related to `point_survey` in Portal 2 (removed the entity) (Thanks for the report Nanoman2525!)
- Fixed some HL2 entities not communicating their collision groups to the client correctly
- Fixed some models not rendering in Hammer
- Fixed some rare cases of entity IO string corruption
- Fixed the incorrectly sized viewport in HLMV and Faceposer
- Game and tools no longer rename themselves "MainThrd" on Linux
- Hammer camera button and statistics now render correctly
- Load BSP ConVar whitelist from MOD search path to not pick it up from CS:GO
- Marked `sv_force_enable_paint` as replicated
- Marked start/stop videos commands as FCVAR_SERVER_CAN_EXECUTE to fix Portal 2 co-op videos
- Removed playtest random death
- Revert Rocket Turret's skin to idle after rocket explodes
- Unhid `voice_vox`, which is used for open mic mode

## Improvements (16)
- Added `cl_playeranimstate_transitions`/`sv_playeranimstate_transitions` ConVars to enable transitions in player animations
- Changed Hammer config to text format
- Converted Hammer options to Qt
- Entity IO can now send values of any data type to string inputs
- HDR cubemaps are now stored in BC6H format
- LDR cubemaps are now stored in BC7 format
- Increased max lightmap size on surfaces
- Massively improved Adhesion Gel
- Moved `imgui.ini` to be under `cfg/imgui.ini`
- Negative entity coordinates are now sent to the client more accurately
- Ported VGUI debug system menu to ImGui
- Removed `item_ammo_uranium` and `item_ammo_flechette`
- Removed devonly flag from showanimstate ConVars
- Removed houndeye, `weapon_hopwire`, `weapon_manhack` and `weapon_thumper`
- Removed old VGUI fogui
- Replaced OpenAL with SDL for voice recording and removed dependency
